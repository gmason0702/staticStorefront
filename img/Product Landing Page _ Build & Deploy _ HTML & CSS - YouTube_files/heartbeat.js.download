(function(g){var window=this;var z5=function(a){g.S.call(this,{D:"button",W:["ytp-offline-slate-button","ytp-button"],K:[{D:"div",I:"ytp-offline-slate-button-icon",V:"{{icon}}"},{D:"div",I:"ytp-offline-slate-button-text",V:"{{text}}"}]});this.B=a;this.w=this.u=null;this.hide();this.ha("click",this.C,this)},Cqa=function(a,b){!a.u&&b&&b.toggleButtonRenderer?a.u=b.toggleButtonRenderer:b&&b.toggleButtonRenderer||(a.u=null);
A5(a)},A5=function(a){if(a.u){if(a.u.isToggled){var b=a.u.toggledText?g.MA(a.u.toggledText):"";
a.update({text:b,icon:Dqa(a.u.toggledIcon)})}else b=a.u.defaultText?g.MA(a.u.defaultText):"",a.update({text:b,icon:Dqa(a.u.defaultIcon)});a.show()}else a.hide()},Dqa=function(a){if(!a)return null;
switch(a.iconType){case "NOTIFICATIONS_NONE":return g.X?{D:"div",W:["ytp-icon","ytp-icon-notifications-none"]}:{D:"svg",N:{fill:"#fff",height:"24px",viewBox:"0 0 24 24",width:"24px"},K:[{D:"path",N:{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5v6z"}}]};case "NOTIFICATIONS_ACTIVE":return g.EN();default:return null}},B5=function(a){g.S.call(this,
{D:"div",
I:"ytp-offline-slate",K:[{D:"div",I:"ytp-offline-slate-bar",K:[{D:"span",I:"ytp-offline-slate-icon",K:[g.X?{D:"div",W:["ytp-icon","ytp-icon-live-icon"]}:{D:"svg",N:{fill:"#fff",height:"100%",viewBox:"0 0 24 24",width:"100%"},K:[{D:"path",N:{d:"M16.94 6.91l-1.41 1.45c.9.94 1.46 2.22 1.46 3.64s-.56 2.71-1.46 3.64l1.41 1.45c1.27-1.31 2.05-3.11 2.05-5.09s-.78-3.79-2.05-5.09zM19.77 4l-1.41 1.45C19.98 7.13 21 9.44 21 12.01c0 2.57-1.01 4.88-2.64 6.54l1.4 1.45c2.01-2.04 3.24-4.87 3.24-7.99 0-3.13-1.23-5.96-3.23-8.01zM7.06 6.91c-1.27 1.3-2.05 3.1-2.05 5.09s.78 3.79 2.05 5.09l1.41-1.45c-.9-.94-1.46-2.22-1.46-3.64s.56-2.71 1.46-3.64L7.06 6.91zM5.64 5.45L4.24 4C2.23 6.04 1 8.87 1 11.99c0 3.13 1.23 5.96 3.23 8.01l1.41-1.45C4.02 16.87 3 14.56 3 11.99s1.01-4.88 2.64-6.54z"}},
{D:"circle",N:{cx:"12",cy:"12",r:"3"}}]}]},{D:"span",I:"ytp-offline-slate-buttons"},{D:"span",I:"ytp-offline-slate-messages",K:[{D:"div",I:"ytp-offline-slate-main-text",V:"{{maintext}}"},{D:"div",I:"ytp-offline-slate-subtitle-text",V:"{{subtitletext}}"}]}]}]});this.w=a;this.A=this.u=null;this.F=!1;this.B=new g.I(this.G,1E3,this);this.L(a,"presentingplayerstatechange",this.H);this.L(a,"livestatedata",this.C);this.hide();a=this.w.getVideoData();a.getPlayerResponse()&&(a=a.getPlayerResponse().playabilityStatus)&&
this.C(a)},C5=function(a,b,c){if(b){var d=void 0!=b.subtitleText?g.MA(b.subtitleText):"";
b=c?c:void 0!=b.mainText?g.MA(b.mainText):"";a.update({maintext:b,subtitletext:d});g.L(a.element,"ytp-offline-slate-single-text-line",!d)}},F5=function(a){g.VQ.call(this,a);
var b=this;this.G=!1;this.H=0;this.F=!1;this.u=new g.I(function(){var d=b.player.P(),e=b.player.getVideoData();var f=d.C;if(3!=b.player.getPresentingPlayerType()&&!g.W(g.mL(b.player),4))if(D5(b)||e.ua){if(!Eqa(b)||e.ua){var k="GET";var l=d.deviceParams;d={video_id:e.videoId,heartbeat_token:e.heartbeatToken,c:l.c,cver:l.cver,cbrand:l.cbrand,cmodel:l.cmodel,vvt:e.rf,mdx_environment:e.mdxEnvironment,access_token:e.oauthToken,forced_experiments:d.za,utc_offset_minutes:b.O,upg_content_filter_mode:e.Do,
sequence_number:b.J};l=b.player.P();void 0!=l.homeGroupInfo?d.home_group_info=l.homeGroupInfo:void 0!=e.homeGroupInfo&&(d.home_group_info=e.homeGroupInfo);void 0!=l.livingRoomAppMode&&(d.living_room_app_mode=l.livingRoomAppMode);(l="undefined"!=typeof Intl?(new Intl.DateTimeFormat).resolvedOptions().timeZone:null)&&(d.time_zone=l);(l=g.LC(e))&&(d.uloc=l);(l=b.player.getProgressState().ingestionTime)&&isFinite(l)&&(d.ingestion_time=l);f=g.Tg(f+"heartbeat",d)}else k="GET",f=g.Tg(b.w.url,{request_id:g.Nt()}),
e.rf&&(f=g.Tg(f,{vvt:e.rf}),e.mdxEnvironment&&(f=g.Tg(f,{mdx_environment:e.mdxEnvironment}))),e.oauthToken&&(f=g.Tg(f,{access_token:e.oauthToken}));e.hk&&(f=g.Tg(f,{internalipoverride:e.hk}));d={cpn:e.clientPlaybackNonce};e.contextParams&&(d.context_params=e.contextParams);e.Hi&&(d.kpt=e.Hi);f=g.Tg(f,d);g.pp(f,{format:"RAW",method:k,timeout:3E4,onSuccess:(0,g.x)(b.fF,b),onError:(0,g.x)(b.eF,b),Zd:(0,g.x)(b.gF,b),withCredentials:!0})}else E5(b)},0);
g.B(this,this.u);this.o=this.w=null;this.B=!1;this.M=new g.pn(1E3,6E4,1);this.J=0;this.A=null;this.O=-(new g.Bg).getTimezoneOffset();this.C=new g.Ts(this);g.B(this,this.C);Fqa(this);this.C.L(a,"heartbeatparams",this.PF);this.C.L(a,"presentingplayerstatechange",this.QF);this.C.L(a,"videoplayerreset",this.FM);this.C.L(a,g.qE("heartbeat"),this.OF);this.B&&this.o&&Gqa(this,this.o);var c=new g.nE(1E3,0x7ffffffffffff,{priority:0,namespace:"heartbeat"});g.AL(a,[c])},Eqa=function(a){var b=a.player.getVideoData();
return!!g.PC(a.player.getVideoData())&&!b.Lw},D5=function(a){var b=a.player.getVideoData();
return Eqa(a)?!!a.w:!!b.heartbeatToken},G5=function(a,b){if(!a.u.isActive()&&a.G){var c=a.player.getVideoData();
if(D5(a)||c.ua)void 0==b&&(b=a.F?a.B?7500:a.w?1E3*a.w.interval:a.player.getVideoData().Ew||6E4:1E3),a.u.start(b)}},Gqa=function(a,b){var c=b.liveStreamability&&b.liveStreamability.liveStreamabilityRenderer,d=!(!c||!c.switchStreamsImmediately),e=Hqa(c),f=a.player.getVideoData();
if(g.SD(g.mL(a.player))&&!g.WC(f)&&!a.player.isAtLiveHead()&&!d)return e;var k=(d=c&&c.streamTransitionEndpoint&&c.streamTransitionEndpoint.watchEndpoint)&&d.videoId;if(k)return g.IU(a.player.app,k,void 0,void 0,!0,d),e;if("OK"==b.status.toUpperCase()){d=c&&c.broadcastId;d=d!=(a.o&&a.o.liveStreamability&&a.o.liveStreamability.liveStreamabilityRenderer&&a.o.liveStreamability.liveStreamabilityRenderer.broadcastId)&&(d||a.player.fa("web_player_heartbeat_undefined_killswitch"));if(!f.hlsvp&&!f.Rd||d)return c=
{video_id:f.videoId},f.Wm&&(c.is_live_destination="1"),c.autonav_state=f.autonavState,a.player.loadVideoByPlayerVars(c),e;g.BL(a.player,"heartbeat")}c&&c.displayEndscreen&&a.A&&(f=a.A,f.F=!0,f.Ha()&&g.kU(f.w.app,void 0));return e},Hqa=function(a){var b=0;
a&&a.pollDelayMs&&(a=parseInt(a.pollDelayMs,10))&&(b=a);return b},H5=function(a,b,c){if(!a.u.isActive()){a.u.stop();
a.H++;var d=a.player.getVideoData();(d.Gw||b&&!g.PC(a.player.getVideoData())&&!D5(a)&&d.ua?0:a.H>=(a.w?a.w.o:d.Fw||5))?(b=b?"heartbeat.net":"heartbeat.servererror",(d=a.player.getVideoData())&&d.ua?g.NJ(a.player.app.w,b,"Video playback interrupted. Please try again.",c,void 0):g.NJ(a.player.app.w,b,"Sorry, there was an error licensing this video.",c,void 0)):(G5(a,a.M.getValue()),g.qn(a.M))}},E5=function(a){a.H=0;
a.u.stop();a.F=!1;a.J=0},Fqa=function(a){var b=a.player.getVideoData(),c=a.player.P();
if(!b.ua)!g.T(c.experiments,"html5_release_post_live_heartbeat_killswitch")&&g.Ya(b.Kc,"heartbeat")&&g.BL(a.player,"heartbeat");else if(!g.bx(c.w))g.NJ(a.player.app.w,"html5.unsupportedlive","HTML5_NO_AVAILABLE_FORMATS_FALLBACK","nolive.1",void 0);else if(g.T(c.experiments,"live_fresca_v2")){a.B=!0;a.G=!0;if(!g.sy(c)||g.Dy(c))a.A=new B5(a.player),g.B(a,a.A),g.EL(a.player,a.A.element,4);(b=b.getPlayerResponse())&&b.playabilityStatus&&(a.o=b.playabilityStatus);a.o?(b=Hqa(a.o.liveStreamability&&a.o.liveStreamability.liveStreamabilityRenderer))?
G5(a,b):G5(a,7500):G5(a,1E3)}},Iqa=function(a){try{var b=JSON.parse(a);
return null!=b?b:null}catch(c){return null}};
g.r(z5,g.S);
z5.prototype.C=function(){this.w||(this.w=new g.Dr(this.B.P().Ca));var a=g.Qq(this.w.o||g.Rq());g.vB()&&(a.context.clientScreenNonce=g.vB());var b;if(this.u.isToggled){if(b=(b=this.u.toggledServiceEndpoint)&&b.removeUpcomingEventReminderEndpoint&&b.removeUpcomingEventReminderEndpoint.params)a.params=b;b="notification/remove_upcoming_event_reminder"}else{if(b=(b=this.u.defaultServiceEndpoint)&&b.addUpcomingEventReminderEndpoint&&b.addUpcomingEventReminderEndpoint.params)a.params=b;b="notification/add_upcoming_event_reminder"}var c={timeout:5E3};
c.onError=(0,g.x)(this.A,this);c.Zd=(0,g.x)(this.A,this);g.Vq(this.w,b,a,c);this.u.isToggled=!this.u.isToggled;A5(this)};
z5.prototype.A=function(){this.u&&(this.u.isToggled=!this.u.isToggled,A5(this))};g.r(B5,g.S);
B5.prototype.C=function(a){var b=a&&a.liveStreamability&&a.liveStreamability.liveStreamabilityRenderer.offlineSlate;if(b){this.u=a;b=b.liveStreamOfflineSlateRenderer;b.canShowCountdown?this.G():C5(this,b);var c=a&&a.liveStreamability&&a.liveStreamability.liveStreamabilityRenderer&&a.liveStreamability.liveStreamabilityRenderer.offlineSlate&&a.liveStreamability.liveStreamabilityRenderer.offlineSlate.liveStreamOfflineSlateRenderer&&a.liveStreamability.liveStreamabilityRenderer.offlineSlate.liveStreamOfflineSlateRenderer.thumbnail;if(c){for(var d=
0,e=null,f=0;f<c.thumbnails.length;f++)c.thumbnails[f].width>d&&(d=c.thumbnails[f].width,e=c.thumbnails[f].url);e&&(this.element.style.backgroundImage="url("+e+")")}else this.element.style.backgroundImage="";b.actionButtons?(this.A||(this.A=new z5(this.w),this.A.aa(this.o["ytp-offline-slate-buttons"]),g.B(this,this.A)),Cqa(this.A,b.actionButtons[0])):this.A&&Cqa(this.A,null);this.u=a}else this.u=null;this.H()};
B5.prototype.H=function(){var a=g.mL(this.w),b=this.w.getVideoData(),c=b.ua&&(g.VD(a)||g.W(a,2)||g.W(a,64)),d=2==b.autonavState&&g.W(a,2);a=g.SD(a)&&!g.WC(b)&&!this.w.isAtLiveHead(!0);c&&!a&&!d&&this.u&&"LIVE_STREAM_OFFLINE"==this.u.status.toUpperCase()?this.Ha()||(this.show(),this.w.R("offlineslatestatechange"),this.F&&g.kU(this.w.app,void 0)):this.Ha()&&(this.hide(),this.w.R("offlineslatestatechange"))};
B5.prototype.G=function(){var a=this.u&&this.u.liveStreamability&&this.u.liveStreamability.liveStreamabilityRenderer&&this.u.liveStreamability.liveStreamabilityRenderer.offlineSlate&&this.u.liveStreamability.liveStreamabilityRenderer.offlineSlate.liveStreamOfflineSlateRenderer;if(a){var b=Math.floor((0,g.F)()/1E3),c=a.canShowCountdown&&parseInt(a.scheduledStartTime,10);!c||c<=b?(C5(this,a),this.B.stop()):(b=g.gN(c-b),C5(this,a,b),g.Vm(this.B))}};
B5.prototype.X=function(){this.B.dispose();this.B=null;g.S.prototype.X.call(this)};g.r(F5,g.VQ);g.h=F5.prototype;g.h.X=function(){E5(this);g.kS(this.player.app,"heartbeat",void 0);g.VQ.prototype.X.call(this)};
g.h.OF=function(){this.G=!0;G5(this,2E3)};
g.h.PF=function(a){this.w=a;G5(this,2E3)};
g.h.QF=function(a){g.W(a.state,2)||g.W(a.state,64)?(E5(this),this.B&&(this.G=!0,G5(this,1E3))):(g.W(a.state,1)||g.W(a.state,8))&&G5(this,2E3)};
g.h.FM=function(){3!==this.player.getPresentingPlayerType()&&G5(this,2E3)};
g.h.fF=function(a){if(!this.u.isActive()){this.M.reset();this.J++;a=a.responseText;var b=Iqa(a);if(b){this.player.ma("onHeartbeat",b);var c="ok"==b.status?b.stop_heartbeat?2:0:"stop"==b.status?1:"live_stream_offline"==b.status?0:-1}else c=(c=a.match(Jqa))?"0"==c[1]?0:1:-1;if(-1==c)b="decode",window.btoa&&(b+=" "+window.btoa(a)),H5(this,!1,b);else if(2!=c||D5(this))if(this.H=0,this.u.stop(),1==c){this.F=!1;b=this.player;c="LICENSE";var d=Iqa(a);d?a=d.reason||g.mK[c]||"":((a=a.match(Jqa))&&(a=parseInt(a[1],
10))&&(c=g.ID(a)),a=g.mK[c]||"");g.NJ(b.app.w,"heartbeat.stop",a,void 0,void 0)}else this.F=!0,a=0,this.B&&b&&(a=Gqa(this,b),this.player.R("livestatedata",b)),a?G5(this,a):G5(this);else E5(this),this.F=!0}};
g.h.eF=function(a){H5(this,!0,"net-"+a.status)};
g.h.gF=function(){H5(this,!0,"timeout")};
g.h.NF=function(){return!!this.A&&this.A.Ha()};
var Jqa=/^GLS\/1.0 (\d+) (\w+).*?\r\n\r\n([\S\s]*)$/;g.jR.heartbeat=F5;})(_yt_player);
